let table = document.querySelector('table')
let tableArr = [];
let tableLab = [];
//loop all rows and form data array
for ( let i = 1; i < table.rows.length; i++ ) {
    tableArr.push([
     table.rows[i].cells[1].innerHTML]);
tableLab.push(table.rows[i].cells[0].innerHTML)
let canvas = document.createElement("canvas");
canvas.setAttribute("id", "myChart"+i);
table.rows[i].cells[2].appendChild(canvas);
}
console.log(tableArr);

//loop array of data and create chart for each row
tableArr.forEach(function(e,i){
  let chartID = "index_rank_2011"+ (i+1)
  let ctx = document.getElementById(chartID).getContext('2d');
  let myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Vanuatu',
        'Tonga',
        'Philippinen',
        'Salomonen',
        'Guatemala',
        'Bangladesch',
        'Timor-Leste',
        'Costa Rica',
        'Kambodscha',
        'El Salvador',
        'Nicaragua',
        'Papua-Neuguinea',
        'Madagaskar',
        'Brunei Darussalam',
        'Afghanistan',
        'Niger',
        'Gambia',
        'Bhutan',
        'Fidschi',
        'Guinea-Bissau',
        'Jamaika',
        'Tschad',
        'Honduras',
        'Dominikanische Republik',
        'Chile',
        'Mauritius',
        'Senegal',
        'Indonesien',
        'Burkina Faso',
        'Burundi',
        'Mali',
        'Haiti',
        'Sierra Leone',
        'Vietnam',
        'Japan',
        'Benin',
        'Togo',
        'Kamerun',
        'Albanien',
        'Mosambik',
        'Mauretanien',
        'Simbabwe',
        'Guinea',
        'Kap Verde',
        'Usbekistan',
        'Ghana',
        'Suriname',
        'Sudan',
        'Liberia',
        'Nigeria',
        'Elfenbeinküste',
        'Guyana',
        'Malawi',
        'Ecuador',
        'Ruanda',
        'Tansania',
        'Myanmar',
        'Kirgisistan',
        'Sambia',
        'Äthiopien',
        'Algerien',
        'Angola',
        'Samoa',
        'Lesotho',
        'Sri Lanka',
        'Pakistan',
        'Kenia',
        'Kongo',
        'Niederlande',
        'Panama',
        'Indien',
        'Uganda',
        'Tadschikistan',
        'Swasiland',
        'Peru',
        'Eritrea',
        'Zentralafrikanische Republik',
        'Marokko',
        'Griechenland',
        'Dschibuti',
        'Georgien',
        'Turkmenistan',
        'Komoren',
        'Armenien',
        'Thailand',
        'Kolumbien',
        'Jemen',
        'Aserbaidschan',
        'Äquatorialguinea',
        'Trinidad und Tobago',
        'Malaysia',
        'Namibia',
        'Mexiko',
        'Rumänien',
        'China',
        'Gabun',
        'Bosnien und Herzegowina',
        'Syrien',
        'Nepal',
        'Venezuela',
        'Kuba',
        'Belize',
        'Mazedonien',
        'Laos',
        'Irak',
        'Tunesien',
        'Südafrika',
        'Botsuana',
        'Ungarn',
        'Serbien',
        'Türkei',
        'Bolivien',
        'Jordanien',
        'Iran',
        'Libanon',
        'Moldau',
        'Italien',
        'Bahamas',
        'Australien',
        'Neuseeland',
        'Brasilien',
        'Irland',
        'Tschechische Republik',
        'Südkorea',
        'Paraguay',
        'Vereinigte Arabisch Emirate',
        'Bulgarien',
        'Kasachstan',
        'Uruguay',
        'Argentinien',
        'São Tomé und Príncipe',
        'Slowenien',
        'Vereinigte Staaten v. A.',
        'Kroatien',
        'Kuwait',
        'Libyen',
        'Portugal',
        'Vereinigtes Königreich',
        'Russische Föderation',
        'Belgien',
        'Zypern',
        'Mongolei',
        'Polen',
        'Österreich',
        'Slowakei',
        'Spanien',
        'Lettland',
        'Ukraine',
        'Belarus',
        'Deutschland',
        'Litauen',
        'Dänemark',
        'Singapur',
        'Oman',
        'Frankreich',
        'Luxemburg',
        'Seychellen',
        'Israel',
        'Kanada',
        'Schweiz',
        'Barbados',
        'Ägypten',
        'Grenada',
        'Norwegen',
        'Estland',
        'Finnland',
        'Schweden',
        'Kiribati',
        'Bahrain',
        'Island',
        'Saudi-Arabien',
        'Malta',
        'Katar'],
        datasets: [{
            label: tableLab[i],
            data: e,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
})